<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ws_operation">
    <sys_ws_operation action="INSERT_OR_UPDATE">
        <active>true</active>
        <consumes>application/json,application/xml,text/xml</consumes>
        <consumes_customized>false</consumes_customized>
        <default_operation_uri/>
        <enforce_acl>cf9d01d3e73003009d6247e603f6a990</enforce_acl>
        <http_method>POST</http_method>
        <name>ScriptedCreateMultipleEvents</name>
        <operation_script><![CDATA[(function process(/*RESTAPIRequest*/ request, /*RESTAPIResponse*/ response) {

    // implement resource here
	var gr;
	var inc =[];
	var requestBody = request.body;
	var requestData = requestBody.data;
	
	for(i = 0 ; i < requestData.length ; i++ )
	{
		gr = new GlideRecord('u_ensemble_error_events');
		gr.initialize();
		gr.id = requestData[i].id;
		gr.configname = requestData[i].nonfigname;
		gr.job = requestData[i].job;
		gr.messageid = requestData[i].messageid;
		gr.sessionid = requestData[i].sessionid;
		gr.sourceclass = requestData[i].sourceclass;
		gr.sourcemethod = requestData[i].sourcemethod;
		gr.stack = requestData[i].stack;
		gr.text = requestData[i].text;
		gr.timelogged = requestData[i].timelogged;
		gr.tracecat = requestData[i].tracecat;
		gr.type = requestData[i].type;
		//gr.table = "sysevent";
		gr.insert();
		
		gr.query();
		if(gr.next()){
			inc.push({
								
				'ID': gr.id,
				'ConfigName' : gr.configname,
				'Job' : gr.job,
				'MessageId' : gr.messageid,
				'SessionId' : gr.sessionid,
				'SourceClass' : gr.sourceclass,
				'SourceMethod' : gr.sourcemethod,
				'Stack' : gr.stack,
				'Text' : gr.text,
				'TimeLogged' : gr.timelogged,
				'TraceCat' : gr.tracecat,
				'Type' : gr.type
				});	
		}
	}
response.setBody(inc);
})(request, response);]]></operation_script>
        <operation_uri>/api/x_483535_serviceno/scripted_rest_api/events</operation_uri>
        <produces>application/json,application/xml,text/xml</produces>
        <produces_customized>false</produces_customized>
        <relative_path>/events</relative_path>
        <request_example/>
        <requires_acl_authorization>true</requires_acl_authorization>
        <requires_authentication>true</requires_authentication>
        <requires_snc_internal_role>true</requires_snc_internal_role>
        <short_description/>
        <sys_class_name>sys_ws_operation</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-06-03 21:22:02</sys_created_on>
        <sys_id>068b81bb078d501093d5fd1e7c1ed043</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>ScriptedCreateMultipleEvents</sys_name>
        <sys_package display_value="ServiceNow Demo Project" source="x_483535_serviceno">b315c4630781501093d5fd1e7c1ed0c5</sys_package>
        <sys_policy/>
        <sys_scope display_value="ServiceNow Demo Project">b315c4630781501093d5fd1e7c1ed0c5</sys_scope>
        <sys_update_name>sys_ws_operation_068b81bb078d501093d5fd1e7c1ed043</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-06-03 21:46:54</sys_updated_on>
        <web_service_definition display_value="Scripted REST API ">4a4bcd7b078d501093d5fd1e7c1ed066</web_service_definition>
        <web_service_version/>
    </sys_ws_operation>
</record_update>
